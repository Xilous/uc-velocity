Project Specification: ERP System (Python/FastAPI + React/Shadcn)
1. Project Overview
We are building a desktop-focused ERP application for Windows. The app manages Customers, Vendors, Inventory (Parts/Labor), and Project Financials (Quotes/POs). Architecture: "Local Server" pattern.

Backend: Python 3.10+ (FastAPI, SQLAlchemy, SQLite, Pydantic).

Frontend: React (Vite, TypeScript, Tailwind CSS, shadcn/ui).

Distribution: Electron (wrapping the local web server).

2. Domain Logic & Relationships
The core complexity lies in the Resource and Project hierarchy.

A. Resources (Inventory)
Parts: Physical items. Have Category, Cost, Part Number.

Labor: Service items. Have Category, Time, Hourly Rate, Markup Rate.

The Link: A Many-to-One (or Many-to-Many) relationship exists where specific Parts are associated with a specific Labor task.

Logic: When selecting a Labor task (e.g., "Install HVAC"), the system must track which Parts are required for that task to calculate total cost.

B. Project Hierarchy
Project: The root container. Contains Customer, Status, and lists of documents.

Quotes: Customer-facing. Must include:

Labor Items (which include their linked parts cost implicitly or explicitly).

Parts (standalone).

Misc items.

Purchase Orders (POs): Vendor-facing. Must include:

Parts (to be ordered).

Misc items.

Note: POs strictly exclude Labor.

3. Backend Implementation Plan (Python/FastAPI)
Step 3.1: Dependencies & Setup
Create a virtual environment.

Install: fastapi, uvicorn, sqlalchemy, pydantic, alembic (for migrations), python-multipart.

Step 3.2: Database Models (backend/models.py)
Implement the following SQLAlchemy classes:

Contact:

Fields: id, name, type (Enum: Customer, Vendor, Employee), email, phone.

Part:

Fields: id, part_number, description, cost, category_id.

Labor:

Fields: id, description, hours, rate, markup_percent, category_id.

Relationship: parts (Many-to-Many via association table labor_parts_link).

Project:

Fields: id, customer_id (FK), start_date, status.

Quote:

Fields: id, project_id (FK), created_at.

Children: QuoteLineItems (Polymorphic or separate tables for LaborLines, PartLines).

PurchaseOrder:

Fields: id, project_id (FK), vendor_id (FK).

Children: POLineItems.

Step 3.3: Pydantic Schemas (backend/schemas.py)
Create strict types for API validation.

Crucial: The LaborCreate schema must accept a list of part_ids to handle the linking logic immediately upon creation.

class LaborCreate(BaseModel):
    description: str
    rate: float
    linked_part_ids: List[int] = [] # IDs to link in the DB

Step 3.4: API Endpoints (backend/routes/)
GET /parts & POST /parts

GET /labor & POST /labor (Handle the transaction to link parts here).

GET /projects/{id} (Should return full nested structure with Quotes/POs).

4. Frontend Implementation Plan (React/Shadcn)
Step 4.1: Setup
Initialize Vite + React + TypeScript.

Install Tailwind CSS.

Initialize shadcn/ui and add components: button, input, table, dialog, select, card, tabs.

Install lucide-react for icons.

Step 4.2: Core Screens
Inventory Dashboard:

Two tabs: "Parts" and "Labor".

Labor Modal: A form to add Labor that includes a "Multi-Select" or mini-table to search and select existing Parts to attach to this Labor task.

Project Details View:

Header: Customer info.

Left Sidebar: List of Quotes and POs.

Main Content: The selected document (Quote or PO) rendered as an editable table.

Document Editor (Quote/PO):

A dynamic table allowing users to add line items.

Logic: If editing a PO, the "Add Labor" button should be disabled/hidden.

5. Execution Orders for the Agent
Task 1: Backend Core

"Generate the directory structure, the SQLAlchemy models.py reflecting the schema described in section 3.2, and the database.py connection string for SQLite. Ensure the labor_parts_link association table is defined correctly."

Task 2: API Logic

"Create main.py and schemas.py. Implement the CRUD endpoints for Parts and Labor. specifically focusing on the POST /labor endpoint: it must accept linked_part_ids, query those parts, and associate them with the new Labor record in a single transaction."

Task 3: Frontend Inventory

"Create a React component LaborForm.tsx using shadcn/ui. It should fetch the list of available Parts from the API and allow the user to select multiple parts to associate with the new Labor entry."
